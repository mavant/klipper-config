[gcode_macro PROBE_ACTIVATE_HOOK]
description: Run before
gcode:
  PROBE_ATTACH_CHECK DETACHED="PROBE_ERROR_NOT_PICKED_UP"
  M117 Activating probe

[gcode_macro PROBE_DEACTIVATE_HOOK]
description: Run before
gcode:
  M117 Deactivating probe

[gcode_macro PROBE_ERROR_NOT_PICKED_UP]
gcode:
  RESPOND PREFIX="error" MSG="Probe > ERROR > Probe is not picked up"
  M112 # Emergency stop

[gcode_macro PROBE_ERROR_PICKED_UP]
gcode:
  RESPOND PREFIX="error" MSG="Probe > ERROR > Probe is still attached!"
  M112 # Emergency stopk
